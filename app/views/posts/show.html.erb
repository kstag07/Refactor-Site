<main class="flex-main">
<!-- This is where the original post will show when the refactor link is accessed from the main index view -->
<article class="postview">
  <section>
    <h3 class="postview"><%= @post.title %></h3>
    <h3 class="username"><%= link_to @post.author.name, user_path(id: @post.author), class: "username" %></h3>
    <a class="language-tag">
      <%= Post::LANGUAGE_OPTIONS[@post.language] %>
    </a>
    <pre class="originalpost-code">
      <%= markdown @post.body %>
    </pre>
    <p>
      <% if current_user.present? && (current_user.mod? || (current_user.author? &&  @post.author == current_user)) %>
        <%= link_to 'Edit Post', edit_post_path(@post) %> |
        <%= link_to 'Destroy Post', post_path(@post), method: :delete, data: { confirm: 'Are you sure you want to destroy this post?' } %>
      <% end %>
    </p>
    <% if current_user.present? %>
      <a href="#postrefactor" class="button">Refactor This</a>
    <% else %>
      <%= link_to "Refactor This", new_user_session_path, class: "button" %>
    <% end %>
  </section>
</article>

<!-- This is where the base part of the view starts with the refactors generated by users  everything in this has the gray background -->

<div class="post-refactors">
  <article>
    <div class="flex-postcontainer">
      <%= render 'comment' %>
    </div>
  </article>
</div>

  <article class="flex-formcontainer">
    <section class="new-form">
      <div>
        <label><h3>Post your refactor code:</h3></label>
        <%= render 'comments/form' %>
        <a name="postrefactor"></a>
      </div>
    </section>
  </article>
</main>